<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · OnlinePortfolioAnalytics.jl</title><meta name="title" content="API · OnlinePortfolioAnalytics.jl"/><meta property="og:title" content="API · OnlinePortfolioAnalytics.jl"/><meta property="twitter:title" content="API · OnlinePortfolioAnalytics.jl"/><meta name="description" content="Documentation for OnlinePortfolioAnalytics.jl."/><meta property="og:description" content="Documentation for OnlinePortfolioAnalytics.jl."/><meta property="twitter:description" content="Documentation for OnlinePortfolioAnalytics.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">OnlinePortfolioAnalytics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Portfolio-analytics"><span>Portfolio analytics</span></a></li><li><a class="tocitem" href="#Input-types"><span>Input types</span></a></li><li><a class="tocitem" href="#Other"><span>Other</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Documentation"><a class="docs-heading-anchor" href="#API-Documentation">API Documentation</a><a id="API-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-Documentation" title="Permalink"></a></h1><h2 id="Portfolio-analytics"><a class="docs-heading-anchor" href="#Portfolio-analytics">Portfolio analytics</a><a id="Portfolio-analytics-1"></a><a class="docs-heading-anchor-permalink" href="#Portfolio-analytics" title="Permalink"></a></h2><h3 id="Modules"><a class="docs-heading-anchor" href="#Modules">Modules</a><a id="Modules-1"></a><a class="docs-heading-anchor-permalink" href="#Modules" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.OnlinePortfolioAnalytics" href="#OnlinePortfolioAnalytics.OnlinePortfolioAnalytics"><code>OnlinePortfolioAnalytics.OnlinePortfolioAnalytics</code></a> — <span class="docstring-category">Module</span></header><section><div><p><a href="#OnlinePortfolioAnalytics.OnlinePortfolioAnalytics"><code>OnlinePortfolioAnalytics</code></a> provides streaming portfolio analytics using online algorithms that process data incrementally without storing the full history.</p><p><strong>Features</strong></p><ul><li><strong>Return Calculations</strong>: <a href="#OnlinePortfolioAnalytics.SimpleAssetReturn"><code>SimpleAssetReturn</code></a>, <a href="#OnlinePortfolioAnalytics.LogAssetReturn"><code>LogAssetReturn</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a>, <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a></li><li><strong>Mean Returns</strong>: <a href="#OnlinePortfolioAnalytics.ArithmeticMeanReturn"><code>ArithmeticMeanReturn</code></a>, <a href="#OnlinePortfolioAnalytics.GeometricMeanReturn"><code>GeometricMeanReturn</code></a></li><li><strong>Volatility</strong>: <a href="#OnlinePortfolioAnalytics.StdDev"><code>StdDev</code></a>, <a href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>DownsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.UpsideDeviation"><code>UpsideDeviation</code></a></li><li><strong>Drawdown Analysis</strong>: <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.ArithmeticDrawDowns"><code>ArithmeticDrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.MaxArithmeticDrawDown"><code>MaxArithmeticDrawDown</code></a></li><li><strong>Risk-Adjusted Returns</strong>: <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a>, <a href="#OnlinePortfolioAnalytics.Sortino"><code>Sortino</code></a>, <a href="#OnlinePortfolioAnalytics.Calmar"><code>Calmar</code></a>, <a href="#OnlinePortfolioAnalytics.Omega"><code>Omega</code></a></li><li><strong>CAPM Metrics</strong>: <a href="#Beta"><code>Beta</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>ExpectedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.Treynor"><code>Treynor</code></a>, <a href="#OnlinePortfolioAnalytics.JensenAlpha"><code>JensenAlpha</code></a></li><li><strong>Relative Performance</strong>: <a href="#OnlinePortfolioAnalytics.TrackingError"><code>TrackingError</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a></li><li><strong>Risk Metrics</strong>: <a href="#OnlinePortfolioAnalytics.VaR"><code>VaR</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedShortfall"><code>ExpectedShortfall</code></a></li><li><strong>Statistical Moments</strong>: <a href="#OnlinePortfolioAnalytics.AssetReturnMoments"><code>AssetReturnMoments</code></a></li></ul><p><strong>Usage</strong></p><p>All types implement the OnlineStatsBase interface:</p><pre><code class="language-julia hljs">using OnlinePortfolioAnalytics

# Create a statistic
stat = Sharpe{Float64}()

# Feed observations one at a time
for return_value in returns
    fit!(stat, return_value)
end

# Get current value
result = value(stat)</code></pre><p>For metrics requiring paired asset/benchmark data, use <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>:</p><pre><code class="language-julia hljs">stat = Beta{Float64}()
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Asset +5%, Market +3%
value(stat)</code></pre><hr/><p>MIT License</p><p>Copyright (c) 2024 FemtoTrader &lt;femto.trader@gmail.com&gt;</p><p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p><p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p><p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/OnlinePortfolioAnalytics.jl#L1-L47">source</a></section></article><h3 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h3><p><code>OnlineStats.fit!</code> <code>Base.empty!</code></p><h3 id="Asset-return"><a class="docs-heading-anchor" href="#Asset-return">Asset return</a><a id="Asset-return-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-return" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.SimpleAssetReturn" href="#OnlinePortfolioAnalytics.SimpleAssetReturn"><code>OnlinePortfolioAnalytics.SimpleAssetReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct SimpleAssetReturn{T} &lt;: OnlinePortfolioAnalytics.AssetReturn{T}</code></pre><pre><code class="nohighlight hljs">SimpleAssetReturn{T}(; period::Int = 1)</code></pre><p>Calculate simple (arithmetic) returns from a stream of price observations.</p><p>Simple returns measure the percentage change in price between two periods using the formula (P<em>t - P</em>{t-k}) / P_{t-k}, where k is the period.</p><p><strong>Mathematical Definition</strong></p><p><span>$R_t = \frac{P_t - P_{t-k}}{P_{t-k}}$</span></p><p>Where:</p><ul><li><span>$P_t$</span> = price at time t</li><li><span>$P_{t-k}$</span> = price k periods ago</li><li><span>$k$</span> = period (default: 1)</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Number of periods for return calculation (default: 1)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>missing</code> until <code>period + 1</code> observations have been received</li><li>Returns <code>missing</code> if price at t-k is zero (division by zero avoided)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::Union{Missing,T}</code>: Current return value</li><li><code>n::Int</code>: Number of observations</li><li><code>period::Int</code>: Return calculation period</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = SimpleAssetReturn{Float64}()
fit!(stat, 100.0)  # First price observation
fit!(stat, 110.0)  # Second price observation
value(stat)        # Returns 0.1 (10% return)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.LogAssetReturn"><code>LogAssetReturn</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/asset_return.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.LogAssetReturn" href="#OnlinePortfolioAnalytics.LogAssetReturn"><code>OnlinePortfolioAnalytics.LogAssetReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct LogAssetReturn{T} &lt;: OnlinePortfolioAnalytics.AssetReturn{T}</code></pre><pre><code class="nohighlight hljs">LogAssetReturn{T}(; period::Int = 1)</code></pre><p>Calculate logarithmic (continuously compounded) returns from a stream of price observations.</p><p>Log returns are additive across time periods and are commonly used in financial modeling because they have better statistical properties than simple returns.</p><p><strong>Mathematical Definition</strong></p><p><span>$R_t = \ln\left(\frac{P_t}{P_{t-k}}\right)$</span></p><p>Where:</p><ul><li><span>$P_t$</span> = price at time t</li><li><span>$P_{t-k}$</span> = price k periods ago</li><li><span>$k$</span> = period (default: 1)</li><li><span>$\ln$</span> = natural logarithm</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Number of periods for return calculation (default: 1)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>missing</code> until <code>period + 1</code> observations have been received</li><li>Undefined behavior if price at t-k is zero or negative</li></ul><p><strong>Fields</strong></p><ul><li><code>value::Union{Missing,T}</code>: Current return value</li><li><code>n::Int</code>: Number of observations</li><li><code>period::Int</code>: Return calculation period</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = LogAssetReturn{Float64}()
fit!(stat, 100.0)  # First price observation
fit!(stat, 110.0)  # Second price observation
value(stat)        # Returns ~0.0953 (log return)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.SimpleAssetReturn"><code>SimpleAssetReturn</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/asset_return.jl#L94">source</a></section></article><h3 id="Mean-return"><a class="docs-heading-anchor" href="#Mean-return">Mean return</a><a id="Mean-return-1"></a><a class="docs-heading-anchor-permalink" href="#Mean-return" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.ArithmeticMeanReturn" href="#OnlinePortfolioAnalytics.ArithmeticMeanReturn"><code>OnlinePortfolioAnalytics.ArithmeticMeanReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct ArithmeticMeanReturn{T} &lt;: OnlinePortfolioAnalytics.AbstractMeanReturn{T}</code></pre><pre><code class="nohighlight hljs">ArithmeticMeanReturn{T}()</code></pre><p>Calculate the arithmetic mean of returns from a stream of observations.</p><p>The arithmetic mean is the simple average of all returns. It is commonly used for short-term performance analysis but can overestimate long-term growth.</p><p><strong>Mathematical Definition</strong></p><p><span>$\bar{R} = \frac{1}{n}\sum_{i=1}^{n} R_i$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$n$</span> = number of observations</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current mean return</li><li><code>n::Int</code>: Number of observations</li><li><code>sum::Sum</code>: Internal sum tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = ArithmeticMeanReturn{Float64}()
fit!(stat, 0.05)   # 5% return
fit!(stat, -0.02)  # -2% return
fit!(stat, 0.03)   # 3% return
value(stat)        # Returns 0.02 (2% average)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.GeometricMeanReturn"><code>GeometricMeanReturn</code></a>, <a href="#OnlinePortfolioAnalytics.StdDev"><code>StdDev</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/mean_return.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.GeometricMeanReturn" href="#OnlinePortfolioAnalytics.GeometricMeanReturn"><code>OnlinePortfolioAnalytics.GeometricMeanReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct GeometricMeanReturn{T} &lt;: OnlinePortfolioAnalytics.AbstractMeanReturn{T}</code></pre><pre><code class="nohighlight hljs">GeometricMeanReturn{T}()</code></pre><p>Calculate the geometric mean of returns from a stream of observations.</p><p>The geometric mean accounts for compounding and provides a better measure of long-term average return than arithmetic mean. It represents the constant return rate that would produce the same final value.</p><p><strong>Mathematical Definition</strong></p><p><span>$G = \left(\prod_{i=1}^{n}(1+R_i)\right)^{1/n} - 1$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$n$</span> = number of observations</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>-1.0</code> if cumulative product becomes zero</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current geometric mean return</li><li><code>n::Int</code>: Number of observations</li><li><code>prod::Prod</code>: Internal product tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = GeometricMeanReturn{Float64}()
fit!(stat, 0.10)   # 10% return
fit!(stat, -0.05)  # -5% return
fit!(stat, 0.08)   # 8% return
value(stat)        # Geometric mean return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.ArithmeticMeanReturn"><code>ArithmeticMeanReturn</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/mean_return.jl#L70">source</a></section></article><h3 id="Cumulative-return"><a class="docs-heading-anchor" href="#Cumulative-return">Cumulative return</a><a id="Cumulative-return-1"></a><a class="docs-heading-anchor-permalink" href="#Cumulative-return" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.CumulativeReturn" href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>OnlinePortfolioAnalytics.CumulativeReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct CumulativeReturn{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">CumulativeReturn{T}()</code></pre><p>Calculate the cumulative (total) return from a stream of periodic returns.</p><p>Cumulative return represents the total growth factor of an investment over the entire observation period using geometric compounding.</p><p><strong>Mathematical Definition</strong></p><p><span>$C = \prod_{i=1}^{n}(1+R_i)$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$n$</span> = number of observations</li></ul><p>Note: The value represents the growth factor, not the percentage return. Subtract 1 to get the percentage cumulative return.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns the running product as observations are added</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current cumulative growth factor</li><li><code>n::Int</code>: Number of observations</li><li><code>prod::Prod</code>: Internal product tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = CumulativeReturn{Float64}()
fit!(stat, 0.10)   # 10% return
fit!(stat, -0.05)  # -5% return
fit!(stat, 0.03)   # 3% return
value(stat)        # Cumulative growth factor (e.g., 1.0785)
# Percentage return: value(stat) - 1 = 0.0785 (7.85%)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.GeometricMeanReturn"><code>GeometricMeanReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/cumulative_return.jl#L1">source</a></section></article><h3 id="Standard-deviation"><a class="docs-heading-anchor" href="#Standard-deviation">Standard deviation</a><a id="Standard-deviation-1"></a><a class="docs-heading-anchor-permalink" href="#Standard-deviation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.StdDev" href="#OnlinePortfolioAnalytics.StdDev"><code>OnlinePortfolioAnalytics.StdDev</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct StdDev{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">StdDev{T}()</code></pre><p>Calculate the sample standard deviation of returns from a stream of observations.</p><p>Standard deviation measures the volatility or dispersion of returns around the mean. It is a fundamental risk measure in portfolio analysis.</p><p><strong>Mathematical Definition</strong></p><p><span>$\sigma = \sqrt{\frac{1}{n-1}\sum_{i=1}^{n}(R_i - \bar{R})^2}$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$\bar{R}$</span> = mean return</li><li><span>$n$</span> = number of observations</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>1.0</code> when no observations (initial value)</li><li>Returns <code>0.0</code> when only one observation (no variance)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current standard deviation</li><li><code>n::Int</code>: Number of observations</li><li><code>variance::Variance</code>: Internal variance tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = StdDev{Float64}()
fit!(stat, 0.05)   # 5% return
fit!(stat, -0.02)  # -2% return
fit!(stat, 0.03)   # 3% return
value(stat)        # Standard deviation of returns</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.ArithmeticMeanReturn"><code>ArithmeticMeanReturn</code></a>, <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/std_dev.jl#L1">source</a></section></article><h3 id="Drawdowns"><a class="docs-heading-anchor" href="#Drawdowns">Drawdowns</a><a id="Drawdowns-1"></a><a class="docs-heading-anchor-permalink" href="#Drawdowns" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.DrawDowns" href="#OnlinePortfolioAnalytics.DrawDowns"><code>OnlinePortfolioAnalytics.DrawDowns</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct DrawDowns{T} &lt;: OnlinePortfolioAnalytics.AbstractDrawDowns{T}</code></pre><pre><code class="nohighlight hljs">DrawDowns{T}()</code></pre><p>Calculate the current drawdown from a stream of returns using the geometric method.</p><p>Drawdown measures the percentage decline from the peak cumulative return to the current cumulative return. This implementation uses geometric compounding where cumulative returns are computed as the product of (1 + return).</p><p><strong>Mathematical Definition</strong></p><p>For a sequence of returns r₁, r₂, ..., rₙ:</p><ul><li>Cumulative return at time t: <span>$C_t = \prod_{i=1}^{t}(1+R_i)$</span></li><li>Running peak at time t: <span>$P_t = \max(C_1, C_2, ..., C_t)$</span></li><li>Drawdown at time t: <span>$D_t = \frac{C_t}{P_t} - 1$</span></li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>0.0</code> at new peaks (no drawdown)</li><li>Returns negative values during drawdown periods</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current drawdown value (negative or zero)</li><li><code>n::Int</code>: Number of observations</li><li><code>prod::Prod</code>: Internal cumulative return tracker</li><li><code>extrema::Extrema</code>: Internal peak tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = DrawDowns{Float64}()
fit!(stat, 0.10)   # 10% gain - new peak
fit!(stat, -0.05)  # 5% loss - in drawdown
fit!(stat, -0.03)  # 3% loss - deeper drawdown
value(stat)        # Current drawdown (negative value)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.ArithmeticDrawDowns"><code>ArithmeticDrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/drawdowns.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.ArithmeticDrawDowns" href="#OnlinePortfolioAnalytics.ArithmeticDrawDowns"><code>OnlinePortfolioAnalytics.ArithmeticDrawDowns</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct ArithmeticDrawDowns{T} &lt;: OnlinePortfolioAnalytics.AbstractDrawDowns{T}</code></pre><pre><code class="nohighlight hljs">ArithmeticDrawDowns{T}()</code></pre><p>Calculate the current drawdown from a stream of returns using the arithmetic method.</p><p>Drawdown measures the percentage decline from the peak cumulative return to the current cumulative return. This implementation uses arithmetic compounding where cumulative returns are computed as the sum of returns.</p><p><strong>Mathematical Definition</strong></p><p>For a sequence of returns r₁, r₂, ..., rₙ:</p><ul><li>Cumulative return at time t: <span>$C_t = 1 + \sum_{i=1}^{t} R_i$</span></li><li>Running peak at time t: <span>$P_t = \max(C_1, C_2, ..., C_t)$</span></li><li>Drawdown at time t: <span>$D_t = \frac{C_t}{P_t} - 1$</span></li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>0.0</code> at new peaks (no drawdown)</li><li>Returns negative values during drawdown periods</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current drawdown value (negative or zero)</li><li><code>n::Int</code>: Number of observations</li><li><code>sum::Sum</code>: Internal cumulative return tracker</li><li><code>extrema::Extrema</code>: Internal peak tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = ArithmeticDrawDowns{Float64}()
fit!(stat, 0.10)   # 10% gain - new peak
fit!(stat, -0.05)  # 5% loss - in drawdown
fit!(stat, -0.03)  # 3% loss - deeper drawdown
value(stat)        # Current drawdown (negative value)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.MaxArithmeticDrawDown"><code>MaxArithmeticDrawDown</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/drawdowns.jl#L79">source</a></section></article><h3 id="Maximum-Drawdown"><a class="docs-heading-anchor" href="#Maximum-Drawdown">Maximum Drawdown</a><a id="Maximum-Drawdown-1"></a><a class="docs-heading-anchor-permalink" href="#Maximum-Drawdown" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.AbstractMaxDrawDown" href="#OnlinePortfolioAnalytics.AbstractMaxDrawDown"><code>OnlinePortfolioAnalytics.AbstractMaxDrawDown</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract supertype for maximum drawdown statistics. Subtypes: MaxDrawDown (geometric), MaxArithmeticDrawDown (arithmetic)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/max_drawdown.jl#L4-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.MaxDrawDown" href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>OnlinePortfolioAnalytics.MaxDrawDown</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct MaxDrawDown{T} &lt;: OnlinePortfolioAnalytics.AbstractMaxDrawDown{T}</code></pre><pre><code class="nohighlight hljs">MaxDrawDown{T}()</code></pre><p>Track the maximum (worst) peak-to-trough decline using geometric return compounding.</p><p>Maximum drawdown is the largest percentage decline from a cumulative return peak to a subsequent trough. This implementation uses the geometric method where cumulative returns are computed as the product of (1 + return).</p><p>The <code>value</code> returns the most negative drawdown observed, following industry convention where &quot;maximum drawdown&quot; refers to the largest decline magnitude.</p><p><strong>Mathematical Definition</strong></p><p>For a sequence of returns r₁, r₂, ..., rₙ:</p><ul><li>Cumulative return at time t: Cₜ = ∏ᵢ₌₁ᵗ (1 + rᵢ)</li><li>Running peak at time t: Pₜ = max(C₁, C₂, ..., Cₜ)</li><li>Drawdown at time t: Dₜ = Cₜ / Pₜ - 1</li><li>Maximum drawdown: min(D₁, D₂, ..., Dₙ)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = MaxDrawDown{Float64}()
fit!(stat, 0.10)   # 10% gain
fit!(stat, -0.05)  # 5% loss
fit!(stat, -0.15)  # 15% loss
value(stat)        # Returns most negative drawdown observed (e.g., -0.19)</code></pre><p><strong>References</strong></p><ul><li>empyrical (Python): max_drawdown() returns negative value</li><li>PerformanceAnalytics (R): maxDrawdown() returns positive magnitude</li></ul><p>See also: <a href="#OnlinePortfolioAnalytics.MaxArithmeticDrawDown"><code>MaxArithmeticDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/max_drawdown.jl#L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.MaxArithmeticDrawDown" href="#OnlinePortfolioAnalytics.MaxArithmeticDrawDown"><code>OnlinePortfolioAnalytics.MaxArithmeticDrawDown</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct MaxArithmeticDrawDown{T} &lt;: OnlinePortfolioAnalytics.AbstractMaxDrawDown{T}</code></pre><pre><code class="nohighlight hljs">MaxArithmeticDrawDown{T}()</code></pre><p>Track the maximum (worst) peak-to-trough decline using arithmetic return compounding.</p><p>This implementation uses the arithmetic method where cumulative returns are computed as the sum of returns, suitable for simple (non-compounding) returns.</p><p>The <code>value</code> returns the most negative drawdown observed, following industry convention where &quot;maximum drawdown&quot; refers to the largest decline magnitude.</p><p><strong>Mathematical Definition</strong></p><p>For a sequence of returns r₁, r₂, ..., rₙ:</p><ul><li>Cumulative return at time t: Cₜ = 1 + Σᵢ₌₁ᵗ rᵢ</li><li>Running peak at time t: Pₜ = max(C₁, C₂, ..., Cₜ)</li><li>Drawdown at time t: Dₜ = Cₜ / Pₜ - 1</li><li>Maximum drawdown: min(D₁, D₂, ..., Dₙ)</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = MaxArithmeticDrawDown{Float64}()
fit!(stat, 0.10)   # 10% gain
fit!(stat, -0.05)  # 5% loss
value(stat)        # Returns most negative drawdown observed</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.ArithmeticDrawDowns"><code>ArithmeticDrawDowns</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/max_drawdown.jl#L92">source</a></section></article><h3 id="Statistical-moments"><a class="docs-heading-anchor" href="#Statistical-moments">Statistical moments</a><a id="Statistical-moments-1"></a><a class="docs-heading-anchor-permalink" href="#Statistical-moments" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.AssetReturnMoments" href="#OnlinePortfolioAnalytics.AssetReturnMoments"><code>OnlinePortfolioAnalytics.AssetReturnMoments</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct AssetReturnMoments{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsMultiOutput{T}</code></pre><pre><code class="nohighlight hljs">AssetReturnMoments{T}()</code></pre><p>Calculate the first four statistical moments of returns from a stream of observations.</p><p>This type computes mean, standard deviation, skewness, and kurtosis simultaneously, providing a complete statistical profile of the return distribution. The output is a NamedTuple with fields <code>:mean</code>, <code>:std</code>, <code>:skewness</code>, and <code>:kurtosis</code>.</p><p><strong>Mathematical Definition</strong></p><ul><li>Mean: <span>$\bar{R} = \frac{1}{n}\sum_{i=1}^{n} R_i$</span></li><li>Standard deviation: <span>$\sigma = \sqrt{\frac{1}{n-1}\sum_{i=1}^{n}(R_i - \bar{R})^2}$</span></li><li>Skewness: <span>$\gamma_1 = \frac{\frac{1}{n}\sum_{i=1}^{n}(R_i - \bar{R})^3}{\sigma^3}$</span></li><li>Kurtosis: <span>$\gamma_2 = \frac{\frac{1}{n}\sum_{i=1}^{n}(R_i - \bar{R})^4}{\sigma^4} - 3$</span> (excess kurtosis)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>(mean=0.0, std=0.0, skewness=0.0, kurtosis=0.0)</code> when no observations</li><li>Skewness and kurtosis require at least 3-4 observations for meaningful values</li></ul><p><strong>Fields</strong></p><ul><li><code>value::NamedTuple</code>: Current moments as (mean, std, skewness, kurtosis)</li><li><code>n::Int</code>: Number of observations</li><li><code>moments::Moments</code>: Internal moments tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = AssetReturnMoments{Float64}()
fit!(stat, 0.05)
fit!(stat, -0.02)
fit!(stat, 0.03)
fit!(stat, -0.01)
m = value(stat)
m.mean      # Mean return
m.std       # Standard deviation
m.skewness  # Skewness
m.kurtosis  # Excess kurtosis</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.ArithmeticMeanReturn"><code>ArithmeticMeanReturn</code></a>, <a href="#OnlinePortfolioAnalytics.StdDev"><code>StdDev</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/moments.jl#L1">source</a></section></article><h3 id="Sharpe-ratio"><a class="docs-heading-anchor" href="#Sharpe-ratio">Sharpe ratio</a><a id="Sharpe-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Sharpe-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Sharpe" href="#OnlinePortfolioAnalytics.Sharpe"><code>OnlinePortfolioAnalytics.Sharpe</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Sharpe{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">Sharpe{T}(; period=252, risk_free=0)</code></pre><p>Calculate the Sharpe ratio from a stream of periodic returns.</p><p>The Sharpe ratio measures risk-adjusted performance by dividing excess return (above risk-free rate) by volatility. Higher values indicate better risk-adjusted returns.</p><p><strong>Mathematical Definition</strong></p><p><span>$S = \sqrt{T} \times \frac{E[R] - r_f}{\sigma}$</span></p><p>Where:</p><ul><li><span>$E[R]$</span> = expected (mean) return</li><li><span>$r_f$</span> = risk-free rate</li><li><span>$\sigma$</span> = standard deviation of returns</li><li><span>$T$</span> = annualization period</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default: 252)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li><li>Hourly: 252 × 6.5</li></ul></li><li><code>risk_free</code>: Risk-free rate per period (default: 0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>NaN</code> when standard deviation is zero (all returns identical)</li><li>Returns <code>0.0</code> when no observations</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Sharpe ratio</li><li><code>n::Int</code>: Number of observations</li><li><code>mean::Mean</code>: Internal mean tracker</li><li><code>stddev::StdDev</code>: Internal standard deviation tracker</li><li><code>period::Int</code>: Annualization factor</li><li><code>risk_free::T</code>: Risk-free rate</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Sharpe{Float64}(period=252, risk_free=0.0)
fit!(stat, 0.02)   # 2% return
fit!(stat, -0.01)  # -1% return
fit!(stat, 0.03)   # 3% return
value(stat)        # Annualized Sharpe ratio</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Sortino"><code>Sortino</code></a>, <a href="#OnlinePortfolioAnalytics.Treynor"><code>Treynor</code></a>, <a href="#OnlinePortfolioAnalytics.Omega"><code>Omega</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/sharpe.jl#L3">source</a></section></article><h3 id="Sortino-ratio"><a class="docs-heading-anchor" href="#Sortino-ratio">Sortino ratio</a><a id="Sortino-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Sortino-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Sortino" href="#OnlinePortfolioAnalytics.Sortino"><code>OnlinePortfolioAnalytics.Sortino</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Sortino{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">Sortino{T}(; period=252, risk_free=0)</code></pre><p>Calculate the Sortino ratio from a stream of periodic returns.</p><p>The Sortino ratio is similar to the Sharpe ratio but uses only downside deviation (volatility of negative returns) in the denominator, making it more appropriate for asymmetric return distributions.</p><p><strong>Mathematical Definition</strong></p><p><span>$So = \sqrt{T} \times \frac{E[R] - r_f}{\sigma_{down}}$</span></p><p>Where:</p><ul><li><span>$E[R]$</span> = expected (mean) return</li><li><span>$r_f$</span> = risk-free rate</li><li><span>$\sigma_{down}$</span> = standard deviation of negative returns only</li><li><span>$T$</span> = annualization period</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default: 252)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li><li>Hourly: 252 × 6.5</li></ul></li><li><code>risk_free</code>: Risk-free rate per period (default: 0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>NaN</code> or <code>Inf</code> when downside deviation is zero (no negative returns)</li><li>Returns <code>0.0</code> when no observations</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Sortino ratio</li><li><code>n::Int</code>: Number of observations</li><li><code>mean_ret::Mean</code>: Internal mean return tracker</li><li><code>stddev_neg_ret::StdDev</code>: Internal downside deviation tracker</li><li><code>period::Int</code>: Annualization factor</li><li><code>risk_free::T</code>: Risk-free rate</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Sortino{Float64}(period=252, risk_free=0.0)
fit!(stat, 0.02)   # 2% return (positive, not included in downside)
fit!(stat, -0.01)  # -1% return (negative, included in downside)
fit!(stat, 0.03)   # 3% return
value(stat)        # Annualized Sortino ratio</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a>, <a href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>DownsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.Calmar"><code>Calmar</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/sortino.jl#L3">source</a></section></article><h3 id="Annualized-return"><a class="docs-heading-anchor" href="#Annualized-return">Annualized return</a><a id="Annualized-return-1"></a><a class="docs-heading-anchor-permalink" href="#Annualized-return" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.AnnualizedReturn" href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>OnlinePortfolioAnalytics.AnnualizedReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct AnnualizedReturn{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">AnnualizedReturn{T}(; period=252)</code></pre><p>Calculate annualized return (CAGR - Compound Annual Growth Rate) from a stream of periodic returns using geometric compounding.</p><p><strong>Mathematical Definition</strong></p><p>For a sequence of returns r₁, r₂, ..., rₙ:</p><ul><li>Cumulative return: C = ∏ᵢ₌₁ⁿ (1 + rᵢ)</li><li>Annualized return: (C)^(period/n) - 1</li></ul><p>This is equivalent to the CAGR (Compound Annual Growth Rate) formula.</p><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default 252 for daily returns)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li><li>Hourly: 252 × 6.5</li></ul></li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current annualized return</li><li><code>n::Int</code>: Number of observations</li><li><code>prod::Prod{T}</code>: Internal product tracker for cumulative return</li><li><code>period::Int</code>: Annualization factor</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = AnnualizedReturn()
fit!(stat, 0.01)   # 1% daily return
fit!(stat, 0.02)   # 2% daily return
fit!(stat, -0.01)  # -1% daily return
value(stat)        # Annualized return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Calmar"><code>Calmar</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/annualized_return.jl#L5">source</a></section></article><h3 id="Calmar-ratio"><a class="docs-heading-anchor" href="#Calmar-ratio">Calmar ratio</a><a id="Calmar-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Calmar-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Calmar" href="#OnlinePortfolioAnalytics.Calmar"><code>OnlinePortfolioAnalytics.Calmar</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Calmar{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">Calmar{T}(; period=252)</code></pre><p>Calculate the Calmar ratio from a stream of periodic returns.</p><p>The Calmar ratio measures risk-adjusted performance by dividing the annualized return by the absolute value of the maximum drawdown.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{Calmar} = \frac{\text{AnnualizedReturn}}{|\text{MaxDrawDown}|}$</span></p><p>Where:</p><ul><li>AnnualizedReturn is the CAGR (Compound Annual Growth Rate)</li><li>MaxDrawDown is the worst peak-to-trough decline (negative value)</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default 252 for daily returns)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li></ul></li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Calmar ratio</li><li><code>n::Int</code>: Number of observations</li><li><code>annualized_return::AnnualizedReturn{T}</code>: Internal annualized return tracker</li><li><code>max_drawdown::MaxDrawDown{T}</code>: Internal max drawdown tracker</li><li><code>period::Int</code>: Annualization factor</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>Inf</code> when max drawdown is zero (all positive returns)</li><li>Returns <code>0.0</code> when no observations have been made</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Calmar()
fit!(stat, 0.05)   # 5% gain
fit!(stat, -0.03)  # 3% loss
fit!(stat, 0.02)   # 2% gain
value(stat)        # Calmar ratio</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/calmar.jl#L5">source</a></section></article><h3 id="Beta"><a class="docs-heading-anchor" href="#Beta">Beta</a><a id="Beta-1"></a><a class="docs-heading-anchor-permalink" href="#Beta" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Beta" href="#OnlinePortfolioAnalytics.Beta"><code>OnlinePortfolioAnalytics.Beta</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Beta{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">Beta{T}()</code></pre><p>Calculate the beta coefficient (systematic risk) from paired asset/market returns.</p><p>Beta measures how an asset moves relative to a market benchmark. A beta of 1.0 means the asset moves with the market; beta &gt; 1 means more volatile than market; beta &lt; 1 means less volatile; negative beta means inverse correlation.</p><p><strong>Mathematical Definition</strong></p><p><span>$\beta = \frac{\text{Cov}(R_a, R_m)}{\text{Var}(R_m)}$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset returns</li><li><span>$R_m$</span> = market returns</li><li>Cov = covariance</li><li>Var = variance</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient data)</li><li>Returns <code>0.0</code> when market variance is zero (avoid division by zero)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current beta value</li><li><code>n::Int</code>: Number of observations</li><li><code>cov_matrix::CovMatrix</code>: Internal 2x2 covariance matrix tracker</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Beta()
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Asset +5%, Market +3%
fit!(stat, AssetBenchmarkReturn(0.02, 0.01))  # Asset +2%, Market +1%
fit!(stat, AssetBenchmarkReturn(-0.01, -0.02)) # Asset -1%, Market -2%
value(stat)  # Beta coefficient</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>ExpectedReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/beta.jl#L5">source</a></section></article><h3 id="Expected-return-(CAPM)"><a class="docs-heading-anchor" href="#Expected-return-(CAPM)">Expected return (CAPM)</a><a id="Expected-return-(CAPM)-1"></a><a class="docs-heading-anchor-permalink" href="#Expected-return-(CAPM)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.ExpectedReturn" href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>OnlinePortfolioAnalytics.ExpectedReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct ExpectedReturn{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">ExpectedReturn{T}(; risk_free=0.0)</code></pre><p>Calculate the CAPM (Capital Asset Pricing Model) expected return from paired asset/market returns.</p><p>The expected return represents the theoretical return an asset should earn based on its systematic risk (beta) relative to the market.</p><p><strong>Mathematical Definition</strong></p><p><span>$E[R_a] = r_f + \beta \times (E[R_m] - r_f)$</span></p><p>Where:</p><ul><li><span>$E[R_a]$</span> = expected return of the asset</li><li><span>$r_f$</span> = risk-free rate</li><li><span>$\beta$</span> = beta coefficient (systematic risk)</li><li><span>$E[R_m]$</span> = expected market return (mean)</li></ul><p><strong>Parameters</strong></p><ul><li><code>risk_free</code>: Risk-free rate of return (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>risk_free</code> when fewer than 2 observations (insufficient data for beta)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current expected return</li><li><code>n::Int</code>: Number of observations</li><li><code>beta::Beta{T}</code>: Internal beta tracker</li><li><code>risk_free::T</code>: Risk-free rate</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = ExpectedReturn(risk_free=0.02)  # 2% risk-free rate
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Asset +5%, Market +3%
fit!(stat, AssetBenchmarkReturn(0.02, 0.01))  # Asset +2%, Market +1%
value(stat)  # CAPM expected return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#Beta"><code>Beta</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/expected_return.jl#L3">source</a></section></article><h3 id="Value-at-Risk-(VaR)"><a class="docs-heading-anchor" href="#Value-at-Risk-(VaR)">Value at Risk (VaR)</a><a id="Value-at-Risk-(VaR)-1"></a><a class="docs-heading-anchor-permalink" href="#Value-at-Risk-(VaR)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.VaR" href="#OnlinePortfolioAnalytics.VaR"><code>OnlinePortfolioAnalytics.VaR</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct VaR{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">VaR{T}(; confidence=0.95, b=500)</code></pre><p>Calculate Value at Risk (VaR) from a stream of returns using online quantile estimation.</p><p>VaR measures the potential loss at a given confidence level. For example, a 95% VaR of -0.05 means there is a 5% chance of losing more than 5% of the portfolio value.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{VaR}_\alpha = \text{Quantile}_{1-\alpha}(R)$</span></p><p>Where:</p><ul><li><span>$\alpha$</span> = confidence level (e.g., 0.95 for 95% VaR)</li><li><span>$R$</span> = return distribution</li><li>The result is the <span>$(1-\alpha)$</span> percentile of returns</li></ul><p><strong>Parameters</strong></p><ul><li><code>confidence</code>: Confidence level (default 0.95 for 95% VaR)</li><li><code>b</code>: Number of histogram bins for quantile estimation (default 500)</li></ul><p><strong>Input Type</strong></p><p>Accepts single return values (Number) via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current VaR value</li><li><code>n::Int</code>: Number of observations</li><li><code>quantile::Quantile</code>: Internal quantile tracker</li><li><code>confidence::Float64</code>: Confidence level</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = VaR(confidence=0.95)
for ret in returns
    fit!(stat, ret)
end
var_95 = value(stat)  # 5th percentile loss</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.ExpectedShortfall"><code>ExpectedShortfall</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/var.jl#L5">source</a></section></article><h3 id="Expected-Shortfall-(CVaR)"><a class="docs-heading-anchor" href="#Expected-Shortfall-(CVaR)">Expected Shortfall (CVaR)</a><a id="Expected-Shortfall-(CVaR)-1"></a><a class="docs-heading-anchor-permalink" href="#Expected-Shortfall-(CVaR)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.ExpectedShortfall" href="#OnlinePortfolioAnalytics.ExpectedShortfall"><code>OnlinePortfolioAnalytics.ExpectedShortfall</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct ExpectedShortfall{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">ExpectedShortfall{T}(; confidence=0.95)</code></pre><p>Calculate Expected Shortfall (CVaR/ES) from a stream of returns.</p><p>Expected Shortfall measures the average loss in the tail beyond the VaR threshold. Also known as Conditional VaR (CVaR) or Average Value at Risk (AVaR). It is considered a more coherent risk measure than VaR.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{ES}_\alpha = E[R | R \leq \text{VaR}_\alpha]$</span></p><p>Where:</p><ul><li><span>$\alpha$</span> = confidence level (e.g., 0.95 for 95% ES)</li><li><span>$R$</span> = return distribution</li><li>ES is the conditional expectation of returns below VaR</li></ul><p><strong>Parameters</strong></p><ul><li><code>confidence</code>: Confidence level (default 0.95 for 95% ES)</li></ul><p><strong>Input Type</strong></p><p>Accepts single return values (Number) via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns VaR value when no observations below threshold</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current ES value</li><li><code>n::Int</code>: Number of observations</li><li><code>sum_below::T</code>: Sum of returns at or below VaR threshold</li><li><code>count_below::Int</code>: Count of returns at or below VaR</li><li><code>var_threshold::T</code>: Current VaR estimate used as threshold</li><li><code>confidence::Float64</code>: Confidence level</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = ExpectedShortfall(confidence=0.95)
for ret in returns
    fit!(stat, ret)
end
es_95 = value(stat)  # Average of worst 5% returns</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.VaR"><code>VaR</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/expected_shortfall.jl#L3">source</a></section></article><h3 id="Treynor-ratio"><a class="docs-heading-anchor" href="#Treynor-ratio">Treynor ratio</a><a id="Treynor-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Treynor-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Treynor" href="#OnlinePortfolioAnalytics.Treynor"><code>OnlinePortfolioAnalytics.Treynor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Treynor{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">Treynor{T}(; risk_free=0.0)</code></pre><p>Calculate Treynor Ratio from paired asset/market returns.</p><p>Treynor Ratio measures the excess return per unit of systematic risk (beta). Unlike Sharpe Ratio which uses total risk, Treynor uses only market-related risk.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{Treynor} = \frac{E[R_a] - r_f}{\beta}$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset returns</li><li><span>$r_f$</span> = risk-free rate</li><li><span>$\beta$</span> = systematic risk (from CAPM)</li></ul><p><strong>Parameters</strong></p><ul><li><code>risk_free</code>: Risk-free rate (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient for beta)</li><li>Returns <code>Inf</code> or <code>-Inf</code> when beta is zero (division by zero)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Treynor ratio</li><li><code>n::Int</code>: Number of observations</li><li><code>beta::Beta{T}</code>: Internal beta tracker</li><li><code>asset_mean::Mean</code>: Mean asset return tracker</li><li><code>risk_free::T</code>: Risk-free rate</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Treynor(risk_free=0.02)
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Asset +5%, Market +3%
fit!(stat, AssetBenchmarkReturn(0.02, 0.01))  # Asset +2%, Market +1%
value(stat)  # (mean_return - rf) / beta</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#Beta"><code>Beta</code></a>, <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/treynor.jl#L3">source</a></section></article><h3 id="Information-ratio"><a class="docs-heading-anchor" href="#Information-ratio">Information ratio</a><a id="Information-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Information-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.InformationRatio" href="#OnlinePortfolioAnalytics.InformationRatio"><code>OnlinePortfolioAnalytics.InformationRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct InformationRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">InformationRatio{T}()</code></pre><p>Calculate Information Ratio from paired asset/benchmark returns.</p><p>Information Ratio measures the excess return of an asset relative to its benchmark, adjusted for the tracking error. It is a key metric for evaluating active management skill.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{IR} = \frac{E[R_a - R_b]}{\sigma(R_a - R_b)} = \frac{\text{Mean Excess Return}}{\text{Tracking Error}}$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset/portfolio returns</li><li><span>$R_b$</span> = benchmark returns</li><li><span>$E[.]$</span> = expected value (mean)</li><li><span>$\sigma$</span> = standard deviation</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient for TE)</li><li>Returns <code>0.0</code> when tracking error is zero (perfect tracking)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current IR value</li><li><code>n::Int</code>: Number of observations</li><li><code>excess_mean::Mean</code>: Tracker for mean excess return</li><li><code>tracking_error::TrackingError{T}</code>: Tracker for tracking error</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = InformationRatio()
fit!(stat, AssetBenchmarkReturn(0.05, 0.04))  # Asset +5%, Benchmark +4%
fit!(stat, AssetBenchmarkReturn(0.02, 0.03))  # Asset +2%, Benchmark +3%
fit!(stat, AssetBenchmarkReturn(-0.01, -0.02)) # Asset -1%, Benchmark -2%
value(stat)  # Mean(excess) / TrackingError</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#OnlinePortfolioAnalytics.TrackingError"><code>TrackingError</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/information_ratio.jl#L5">source</a></section></article><h3 id="Tracking-error"><a class="docs-heading-anchor" href="#Tracking-error">Tracking error</a><a id="Tracking-error-1"></a><a class="docs-heading-anchor-permalink" href="#Tracking-error" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.TrackingError" href="#OnlinePortfolioAnalytics.TrackingError"><code>OnlinePortfolioAnalytics.TrackingError</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct TrackingError{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">TrackingError{T}()</code></pre><p>Calculate Tracking Error from paired asset/benchmark returns.</p><p>Tracking Error measures how closely a portfolio follows its benchmark by computing the standard deviation of the difference between asset and benchmark returns.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{TE} = \sigma(R_a - R_b)$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset/portfolio returns</li><li><span>$R_b$</span> = benchmark returns</li><li><span>$\sigma$</span> = standard deviation</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient for std dev)</li><li>Returns <code>0.0</code> for perfect tracking (identical returns)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current tracking error value</li><li><code>n::Int</code>: Number of observations</li><li><code>diff_variance::Variance</code>: Internal variance tracker for return differences</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = TrackingError()
fit!(stat, AssetBenchmarkReturn(0.05, 0.04))  # Asset +5%, Benchmark +4%
fit!(stat, AssetBenchmarkReturn(0.02, 0.03))  # Asset +2%, Benchmark +3%
fit!(stat, AssetBenchmarkReturn(-0.01, -0.02)) # Asset -1%, Benchmark -2%
value(stat)  # Standard deviation of differences</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/tracking_error.jl#L5">source</a></section></article><h3 id="Downside-deviation"><a class="docs-heading-anchor" href="#Downside-deviation">Downside deviation</a><a id="Downside-deviation-1"></a><a class="docs-heading-anchor-permalink" href="#Downside-deviation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.DownsideDeviation" href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>OnlinePortfolioAnalytics.DownsideDeviation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct DownsideDeviation{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">DownsideDeviation{T}(; threshold=0.0)</code></pre><p>Calculate Downside Deviation (semi-standard deviation) from a stream of returns.</p><p>Downside Deviation measures the volatility of returns below a threshold (typically 0 or MAR). It captures only negative volatility, providing a more intuitive measure of risk than symmetric standard deviation.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{DD} = \sqrt{\frac{1}{n} \sum_{i=1}^{n} \min(R_i - \tau, 0)^2}$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$\tau$</span> = threshold (Minimum Acceptable Return)</li><li><span>$n$</span> = total number of observations (consistent with Sortino definition)</li></ul><p><strong>Parameters</strong></p><ul><li><code>threshold</code>: Minimum Acceptable Return (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts single return values (Number) via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>0.0</code> when all returns are above threshold</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current downside deviation</li><li><code>n::Int</code>: Total observation count</li><li><code>n_below::Int</code>: Count of observations below threshold</li><li><code>sum_sq_below::T</code>: Sum of squared deviations below threshold</li><li><code>threshold::T</code>: MAR threshold</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = DownsideDeviation(threshold=0.0)
for ret in returns
    fit!(stat, ret)
end
dd = value(stat)  # Semi-std of returns below 0</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.UpsideDeviation"><code>UpsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.Sortino"><code>Sortino</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/downside_deviation.jl#L3">source</a></section></article><h3 id="Upside-deviation"><a class="docs-heading-anchor" href="#Upside-deviation">Upside deviation</a><a id="Upside-deviation-1"></a><a class="docs-heading-anchor-permalink" href="#Upside-deviation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.UpsideDeviation" href="#OnlinePortfolioAnalytics.UpsideDeviation"><code>OnlinePortfolioAnalytics.UpsideDeviation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct UpsideDeviation{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">UpsideDeviation{T}(; threshold=0.0)</code></pre><p>Calculate Upside Deviation (semi-standard deviation) from a stream of returns.</p><p>Upside Deviation measures the volatility of returns above a threshold. It captures only positive volatility, complementing Downside Deviation.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{UD} = \sqrt{\frac{1}{n} \sum_{i=1}^{n} \max(R_i - \tau, 0)^2}$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$\tau$</span> = threshold (Minimum Acceptable Return)</li><li><span>$n$</span> = total number of observations</li></ul><p><strong>Parameters</strong></p><ul><li><code>threshold</code>: Minimum Acceptable Return (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts single return values (Number) via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>0.0</code> when all returns are below threshold</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current upside deviation</li><li><code>n::Int</code>: Total observation count</li><li><code>n_above::Int</code>: Count of observations above threshold</li><li><code>sum_sq_above::T</code>: Sum of squared deviations above threshold</li><li><code>threshold::T</code>: MAR threshold</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = UpsideDeviation(threshold=0.0)
for ret in returns
    fit!(stat, ret)
end
ud = value(stat)  # Semi-std of returns above 0</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>DownsideDeviation</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/upside_deviation.jl#L3">source</a></section></article><h3 id="Omega-ratio"><a class="docs-heading-anchor" href="#Omega-ratio">Omega ratio</a><a id="Omega-ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Omega-ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Omega" href="#OnlinePortfolioAnalytics.Omega"><code>OnlinePortfolioAnalytics.Omega</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Omega{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">Omega{T}(; threshold=0.0)</code></pre><p>Calculate Omega Ratio from a stream of returns.</p><p>Omega Ratio measures the probability-weighted ratio of gains to losses above/below a threshold. It considers the entire return distribution, not just mean and variance.</p><p><strong>Mathematical Definition</strong></p><p><span>$\Omega(\tau) = \frac{\sum_{R_i &gt; \tau} (R_i - \tau)}{\sum_{R_i &lt; \tau} (\tau - R_i)}$</span></p><p>Where:</p><ul><li><span>$R_i$</span> = return for period i</li><li><span>$\tau$</span> = threshold (typically 0)</li></ul><p><strong>Parameters</strong></p><ul><li><code>threshold</code>: Reference threshold (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts single return values (Number) via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Returns <code>Inf</code> when no losses (all returns above threshold)</li><li>Returns <code>0.0</code> when no gains (all returns below threshold)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Omega ratio</li><li><code>n::Int</code>: Observation count</li><li><code>sum_gains::T</code>: Sum of returns above threshold</li><li><code>sum_losses::T</code>: Sum of absolute shortfall below threshold</li><li><code>threshold::T</code>: Reference threshold</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Omega(threshold=0.0)
for ret in returns
    fit!(stat, ret)
end
omega = value(stat)  # sum(gains) / sum(losses)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a>, <a href="#OnlinePortfolioAnalytics.Sortino"><code>Sortino</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/omega.jl#L3">source</a></section></article><h3 id="Jensen&#39;s-Alpha"><a class="docs-heading-anchor" href="#Jensen&#39;s-Alpha">Jensen&#39;s Alpha</a><a id="Jensen&#39;s-Alpha-1"></a><a class="docs-heading-anchor-permalink" href="#Jensen&#39;s-Alpha" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.JensenAlpha" href="#OnlinePortfolioAnalytics.JensenAlpha"><code>OnlinePortfolioAnalytics.JensenAlpha</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct JensenAlpha{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">JensenAlpha{T}(; risk_free=0.0)</code></pre><p>Calculate Jensen&#39;s Alpha from paired asset/market returns.</p><p>Jensen&#39;s Alpha measures the excess return of a portfolio above what the CAPM (Capital Asset Pricing Model) would predict, given its beta. Positive alpha indicates outperformance, negative alpha indicates underperformance.</p><p><strong>Mathematical Definition</strong></p><p><span>$\alpha = E[R_a] - (r_f + \beta \times (E[R_m] - r_f))$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset returns</li><li><span>$R_m$</span> = market returns</li><li><span>$r_f$</span> = risk-free rate</li><li><span>$\beta$</span> = systematic risk coefficient</li></ul><p><strong>Parameters</strong></p><ul><li><code>risk_free</code>: Risk-free rate (default 0.0)</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient for beta)</li></ul><p><strong>Fields</strong></p><ul><li><code>value::T</code>: Current Jensen&#39;s alpha</li><li><code>n::Int</code>: Number of observations</li><li><code>asset_mean::Mean</code>: Mean asset return tracker</li><li><code>market_mean::Mean</code>: Mean market return tracker</li><li><code>beta::Beta{T}</code>: Beta coefficient tracker</li><li><code>risk_free::T</code>: Risk-free rate</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = JensenAlpha(risk_free=0.02)
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Asset +5%, Market +3%
fit!(stat, AssetBenchmarkReturn(0.02, 0.01))  # Asset +2%, Market +1%
value(stat)  # Actual return - CAPM expected return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a>, <a href="#Beta"><code>Beta</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>ExpectedReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/jensen_alpha.jl#L3">source</a></section></article><h3 id="Market-Capture-Ratios"><a class="docs-heading-anchor" href="#Market-Capture-Ratios">Market Capture Ratios</a><a id="Market-Capture-Ratios-1"></a><a class="docs-heading-anchor-permalink" href="#Market-Capture-Ratios" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.UpCapture" href="#OnlinePortfolioAnalytics.UpCapture"><code>OnlinePortfolioAnalytics.UpCapture</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct UpCapture{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">UpCapture{T}()</code></pre><p>Calculate up-market capture ratio from paired asset/benchmark returns.</p><p>Up capture measures how much of the benchmark&#39;s gains the portfolio captures during positive market periods. A ratio &gt; 1.0 means the portfolio outperforms in up markets.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{UpCapture} = \frac{\left(\prod_{R_b &gt; 0}(1 + R_a)\right)^{1/n_{up}} - 1}{\left(\prod_{R_b &gt; 0}(1 + R_b)\right)^{1/n_{up}} - 1}$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset return when benchmark is positive</li><li><span>$R_b$</span> = benchmark return (&gt; 0)</li><li><span>$n_{up}$</span> = count of positive benchmark periods</li></ul><p>This is the ratio of annualized geometric mean returns in up markets.</p><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>. Only observations where benchmark return &gt; 0 are included.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>NaN</code> when no positive benchmark periods observed</li><li>Returns <code>NaN</code> with no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Ratio &gt; 1.0: Portfolio outperforms benchmark in up markets</li><li>Ratio = 1.0: Portfolio matches benchmark in up markets</li><li>Ratio &lt; 1.0: Portfolio underperforms benchmark in up markets</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current up capture ratio value</p></li><li><p><code>n</code>: Total number of observations</p></li><li><p><code>n_up</code>: Count of up-market observations (benchmark &gt; 0)</p></li><li><p><code>asset_prod</code>: Product of (1 + R_asset) for up periods</p></li><li><p><code>benchmark_prod</code>: Product of (1 + R_benchmark) for up periods</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = UpCapture()
fit!(stat, AssetBenchmarkReturn(0.05, 0.03))  # Up market: +5% vs +3%
fit!(stat, AssetBenchmarkReturn(-0.02, -0.04)) # Down market (ignored)
fit!(stat, AssetBenchmarkReturn(0.02, 0.01))  # Up market: +2% vs +1%
value(stat)  # Up capture ratio (&gt; 1.0 in this case)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.DownCapture"><code>DownCapture</code></a>, <a href="#OnlinePortfolioAnalytics.UpDownCaptureRatio"><code>UpDownCaptureRatio</code></a>, <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/up_capture.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.DownCapture" href="#OnlinePortfolioAnalytics.DownCapture"><code>OnlinePortfolioAnalytics.DownCapture</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct DownCapture{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">DownCapture{T}()</code></pre><p>Calculate down-market capture ratio from paired asset/benchmark returns.</p><p>Down capture measures how much of the benchmark&#39;s losses the portfolio captures during negative market periods. A ratio &lt; 1.0 means the portfolio falls less than the benchmark in down markets, which is desirable.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{DownCapture} = \frac{\left(\prod_{R_b &lt; 0}(1 + R_a)\right)^{1/n_{down}} - 1}{\left(\prod_{R_b &lt; 0}(1 + R_b)\right)^{1/n_{down}} - 1}$</span></p><p>Where:</p><ul><li><span>$R_a$</span> = asset return when benchmark is negative</li><li><span>$R_b$</span> = benchmark return (&lt; 0)</li><li><span>$n_{down}$</span> = count of negative benchmark periods</li></ul><p>This is the ratio of annualized geometric mean returns in down markets.</p><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>. Only observations where benchmark return &lt; 0 are included.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>NaN</code> when no negative benchmark periods observed</li><li>Returns <code>NaN</code> with no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Ratio &lt; 1.0: Portfolio falls less than benchmark in down markets (desirable)</li><li>Ratio = 1.0: Portfolio matches benchmark in down markets</li><li>Ratio &gt; 1.0: Portfolio falls more than benchmark in down markets (unfavorable)</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current down capture ratio value</p></li><li><p><code>n</code>: Total number of observations</p></li><li><p><code>n_down</code>: Count of down-market observations (benchmark &lt; 0)</p></li><li><p><code>asset_prod</code>: Product of (1 + R_asset) for down periods</p></li><li><p><code>benchmark_prod</code>: Product of (1 + R_benchmark) for down periods</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = DownCapture()
fit!(stat, AssetBenchmarkReturn(-0.02, -0.05))  # Down market: -2% vs -5%
fit!(stat, AssetBenchmarkReturn(0.03, 0.04))    # Up market (ignored)
fit!(stat, AssetBenchmarkReturn(-0.01, -0.03))  # Down market: -1% vs -3%
value(stat)  # Down capture ratio (&lt; 1.0 in this case - good!)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.UpCapture"><code>UpCapture</code></a>, <a href="#OnlinePortfolioAnalytics.UpDownCaptureRatio"><code>UpDownCaptureRatio</code></a>, <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/down_capture.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.UpDownCaptureRatio" href="#OnlinePortfolioAnalytics.UpDownCaptureRatio"><code>OnlinePortfolioAnalytics.UpDownCaptureRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct UpDownCaptureRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">UpDownCaptureRatio{T}()</code></pre><p>Calculate the up/down capture ratio from paired asset/benchmark returns.</p><p>The up/down capture ratio measures the asymmetry of portfolio performance relative to the benchmark across market conditions. A ratio &gt; 1.0 indicates favorable asymmetry (captures more upside, less downside).</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{UpDownCaptureRatio} = \frac{\text{UpCapture}}{\text{DownCapture}}$</span></p><p>Where:</p><ul><li><a href="#OnlinePortfolioAnalytics.UpCapture"><code>UpCapture</code></a> = geometric mean ratio of returns in up markets</li><li><a href="#OnlinePortfolioAnalytics.DownCapture"><code>DownCapture</code></a> = geometric mean ratio of returns in down markets</li></ul><p><strong>Input Type</strong></p><p>Accepts <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a> observations via <code>fit!</code>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>NaN</code> when either up capture or down capture is <code>NaN</code></li><li>Returns <code>Inf</code> if down capture is zero (undefined in practice)</li><li>Returns <code>NaN</code> with no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Ratio &gt; 1.0: Favorable asymmetry (desirable)<ul><li>Portfolio captures more upside and/or less downside</li></ul></li><li>Ratio = 1.0: Symmetric performance</li><li>Ratio &lt; 1.0: Unfavorable asymmetry<ul><li>Portfolio captures less upside and/or more downside</li></ul></li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current up/down capture ratio value</p></li><li><p><code>n</code>: Total number of observations</p></li><li><p><code>up_capture</code>: Internal up capture tracker</p></li><li><p><code>down_capture</code>: Internal down capture tracker</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = UpDownCaptureRatio()
fit!(stat, AssetBenchmarkReturn(0.06, 0.04))   # Up market
fit!(stat, AssetBenchmarkReturn(-0.01, -0.03)) # Down market
fit!(stat, AssetBenchmarkReturn(0.03, 0.02))   # Up market
fit!(stat, AssetBenchmarkReturn(-0.02, -0.04)) # Down market
value(stat)  # Up/Down ratio (&gt; 1.0 means favorable asymmetry)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.UpCapture"><code>UpCapture</code></a>, <a href="#OnlinePortfolioAnalytics.DownCapture"><code>DownCapture</code></a>, <a href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>AssetBenchmarkReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/up_down_capture_ratio.jl#L3">source</a></section></article><h3 id="Extended-Risk-Adjusted-Ratios"><a class="docs-heading-anchor" href="#Extended-Risk-Adjusted-Ratios">Extended Risk-Adjusted Ratios</a><a id="Extended-Risk-Adjusted-Ratios-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-Risk-Adjusted-Ratios" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.UlcerIndex" href="#OnlinePortfolioAnalytics.UlcerIndex"><code>OnlinePortfolioAnalytics.UlcerIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct UlcerIndex{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">UlcerIndex{T}()</code></pre><p>Calculate the Ulcer Index from a stream of returns.</p><p>The Ulcer Index measures the depth and duration of drawdowns by computing the root-mean-square (RMS) of all drawdown values. It penalizes both the magnitude and frequency of drawdowns, capturing the &quot;pain&quot; of holding an investment through volatile periods.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{UlcerIndex} = \sqrt{\frac{1}{n} \sum_{i=1}^{n} D_i^2}$</span></p><p>Where:</p><ul><li><span>$D_i$</span> = drawdown at time i (from DrawDowns tracker, always ≤ 0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations</li><li>Returns <code>0.0</code> when no drawdown (always at peak)</li></ul><p><strong>Interpretation</strong></p><ul><li>Lower values indicate smoother returns with shallower drawdowns</li><li>Higher values indicate more volatile returns with deeper/longer drawdowns</li><li>Always non-negative (RMS of non-positive values)</li></ul><p><strong>Fields</strong></p><ul><li><p><code>drawdowns</code>: Internal drawdown tracker</p></li><li><p><code>rms</code>: RMS of drawdown values</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = UlcerIndex()
fit!(stat, 0.10)   # +10% gain - new peak
fit!(stat, -0.05)  # -5% loss - in drawdown
fit!(stat, -0.03)  # -3% loss - deeper drawdown
value(stat)        # RMS of drawdown values</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.PainIndex"><code>PainIndex</code></a>, <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/ulcer_index.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.PainIndex" href="#OnlinePortfolioAnalytics.PainIndex"><code>OnlinePortfolioAnalytics.PainIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct PainIndex{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">PainIndex{T}()</code></pre><p>Calculate the Pain Index from a stream of returns.</p><p>The Pain Index measures the average depth of drawdowns by computing the mean of absolute drawdown values. It provides a linear measure of &quot;pain&quot; compared to the quadratic penalty of the Ulcer Index.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{PainIndex} = \frac{1}{n} \sum_{i=1}^{n} |D_i|$</span></p><p>Where:</p><ul><li><span>$D_i$</span> = drawdown at time i (from DrawDowns tracker, always ≤ 0)</li><li><span>$|D_i|$</span> = absolute value of drawdown</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations</li><li>Returns <code>0.0</code> when no drawdown (always at peak)</li></ul><p><strong>Interpretation</strong></p><ul><li>Lower values indicate smoother returns with shallower drawdowns</li><li>Higher values indicate more volatile returns with deeper drawdowns</li><li>Always non-negative</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Pain Index value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>drawdowns</code>: Internal drawdown tracker</p></li><li><p><code>sum_abs_dd</code>: Sum of absolute drawdowns</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = PainIndex()
fit!(stat, 0.10)   # +10% gain - new peak
fit!(stat, -0.05)  # -5% loss - in drawdown
fit!(stat, -0.03)  # -3% loss - deeper drawdown
value(stat)        # Mean of absolute drawdown values</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.UlcerIndex"><code>UlcerIndex</code></a>, <a href="#OnlinePortfolioAnalytics.PainRatio"><code>PainRatio</code></a>, <a href="#OnlinePortfolioAnalytics.DrawDowns"><code>DrawDowns</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/pain_index.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.SterlingRatio" href="#OnlinePortfolioAnalytics.SterlingRatio"><code>OnlinePortfolioAnalytics.SterlingRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct SterlingRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">SterlingRatio{T}(; period=252, threshold=0.10)</code></pre><p>Calculate the Sterling Ratio from a stream of returns.</p><p>The Sterling Ratio measures risk-adjusted performance by dividing annualized return by the adjusted maximum drawdown. The threshold (default 10%) accounts for &quot;normal&quot; expected drawdown, making the ratio more stable for portfolios with small drawdowns.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{SterlingRatio} = \frac{\text{AnnualizedReturn}}{|\text{MaxDrawDown}| - \text{threshold}}$</span></p><p>Where:</p><ul><li>AnnualizedReturn = geometric mean return annualized</li><li>MaxDrawDown = worst peak-to-trough decline (negative value)</li><li>threshold = drawdown adjustment (default 0.10)</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default: 252 for daily returns)</li><li><code>threshold</code>: Drawdown adjustment (default: 0.10 = 10%)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>Inf</code> when |MaxDD| ≤ threshold (adjusted denominator is ≤ 0)</li><li>Returns <code>0.0</code> when no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Higher values indicate better risk-adjusted returns</li><li>Accounts for expected &quot;normal&quot; drawdown via threshold</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Sterling Ratio value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>annualized_return</code>: Internal annualized return tracker</p></li><li><p><code>max_drawdown</code>: Internal max drawdown tracker</p></li><li><p><code>threshold</code>: Drawdown threshold adjustment</p></li><li><p><code>period</code>: Annualization period</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = SterlingRatio(period=252, threshold=0.10)
for r in returns
    fit!(stat, r)
end
value(stat)  # Annualized return / (|MaxDD| - 10%)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Calmar"><code>Calmar</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/sterling_ratio.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.BurkeRatio" href="#OnlinePortfolioAnalytics.BurkeRatio"><code>OnlinePortfolioAnalytics.BurkeRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct BurkeRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">BurkeRatio{T}(; period=252, risk_free=0)</code></pre><p>Calculate the Burke Ratio from a stream of returns.</p><p>The Burke Ratio measures risk-adjusted performance by dividing excess return by the root-mean-square of drawdown values. Unlike Sterling (which uses only max drawdown), Burke penalizes both the magnitude and frequency of all drawdowns.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{BurkeRatio} = \frac{\text{AnnualizedReturn} - R_f}{\sqrt{\frac{1}{n}\sum_{i=1}^{n} D_i^2}}$</span></p><p>Where:</p><ul><li>AnnualizedReturn = geometric mean return annualized</li><li><span>$R_f$</span> = risk-free rate</li><li><span>$D_i$</span> = drawdown at time i</li></ul><p>The denominator is equivalent to the Ulcer Index.</p><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default: 252 for daily returns)</li><li><code>risk_free</code>: Risk-free rate per period (default: 0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>Inf</code> when sum of squared drawdowns is zero (no drawdowns)</li><li>Returns <code>0.0</code> when no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Higher values indicate better risk-adjusted returns</li><li>Penalizes both depth and frequency of drawdowns</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Burke Ratio value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>annualized_return</code>: Internal annualized return tracker</p></li><li><p><code>drawdowns</code>: Internal drawdown tracker</p></li><li><p><code>sum_dd_squared</code>: Sum of squared drawdowns</p></li><li><p><code>risk_free</code>: Risk-free rate</p></li><li><p><code>period</code>: Annualization period</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = BurkeRatio(period=252, risk_free=0.0)
for r in returns
    fit!(stat, r)
end
value(stat)  # Excess return / sqrt(mean(DD^2))</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.SterlingRatio"><code>SterlingRatio</code></a>, <a href="#OnlinePortfolioAnalytics.UlcerIndex"><code>UlcerIndex</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/burke_ratio.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.PainRatio" href="#OnlinePortfolioAnalytics.PainRatio"><code>OnlinePortfolioAnalytics.PainRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct PainRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">PainRatio{T}(; period=252, risk_free=0)</code></pre><p>Calculate the Pain Ratio from a stream of returns.</p><p>The Pain Ratio measures risk-adjusted performance by dividing excess return by the Pain Index (mean absolute drawdown). It provides a linear penalty for drawdowns compared to the quadratic penalty of the Burke Ratio.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{PainRatio} = \frac{\text{AnnualizedReturn} - R_f}{\text{PainIndex}}$</span></p><p>Where:</p><ul><li>AnnualizedReturn = geometric mean return annualized</li><li><span>$R_f$</span> = risk-free rate</li><li>PainIndex = mean of absolute drawdown values</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default: 252 for daily returns)</li><li><code>risk_free</code>: Risk-free rate per period (default: 0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>Inf</code> when Pain Index is zero (no drawdowns)</li><li>Returns <code>0.0</code> when no observations</li></ul><p><strong>Interpretation</strong></p><ul><li>Higher values indicate better risk-adjusted returns</li><li>Uses linear (not quadratic) penalty for drawdowns</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Pain Ratio value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>annualized_return</code>: Internal annualized return tracker</p></li><li><p><code>pain_index</code>: Internal Pain Index tracker</p></li><li><p><code>risk_free</code>: Risk-free rate</p></li><li><p><code>period</code>: Annualization period</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = PainRatio(period=252, risk_free=0.0)
for r in returns
    fit!(stat, r)
end
value(stat)  # Excess return / PainIndex</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.PainIndex"><code>PainIndex</code></a>, <a href="#OnlinePortfolioAnalytics.BurkeRatio"><code>BurkeRatio</code></a>, <a href="#OnlinePortfolioAnalytics.SterlingRatio"><code>SterlingRatio</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/pain_ratio.jl#L5">source</a></section></article><h3 id="Volatility-and-Stability-Metrics"><a class="docs-heading-anchor" href="#Volatility-and-Stability-Metrics">Volatility &amp; Stability Metrics</a><a id="Volatility-and-Stability-Metrics-1"></a><a class="docs-heading-anchor-permalink" href="#Volatility-and-Stability-Metrics" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.AnnualVolatility" href="#OnlinePortfolioAnalytics.AnnualVolatility"><code>OnlinePortfolioAnalytics.AnnualVolatility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct AnnualVolatility{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">AnnualVolatility{T}(; period=252)</code></pre><p>Calculate annualized volatility from a stream of periodic returns.</p><p>Annualized volatility is the standard deviation of returns scaled by the square root of the annualization period. It represents the expected annual dispersion of returns.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{Annual Volatility} = \sigma \times \sqrt{\text{period}}$</span></p><p>Where:</p><ul><li><span>$\sigma$</span> = sample standard deviation of periodic returns</li><li>period = annualization factor (252 for daily, 52 for weekly, 12 for monthly)</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default 252 for daily returns)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li></ul></li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current annualized volatility value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>variance</code>: Internal variance tracker</p></li><li><p><code>period</code>: Annualization period</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = AnnualVolatility()
fit!(stat, 0.01)   # 1% daily return
fit!(stat, 0.02)   # 2% daily return
fit!(stat, -0.01)  # -1% daily return
value(stat)        # Annualized volatility</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.StdDev"><code>StdDev</code></a>, <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/annual_volatility.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Stability" href="#OnlinePortfolioAnalytics.Stability"><code>OnlinePortfolioAnalytics.Stability</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Stability{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">Stability{T}()</code></pre><p>Calculate stability as the R-squared of a linear regression of cumulative log returns.</p><p>Stability measures how consistently returns grow over time. A stability of 1.0 indicates perfectly linear growth (constant returns), while lower values indicate more erratic growth.</p><p><strong>Mathematical Definition</strong></p><p>Stability is the coefficient of determination (R²) from regressing cumulative log returns on the observation index:</p><p><span>$R^2 = 1 - \frac{SS_{res}}{SS_{tot}}$</span></p><p>Where we track cumulative log returns: <span>$y_i = \sum_{j=1}^{i} \log(1 + r_j)$</span></p><p>And regress against time index <span>$x_i = i$</span>.</p><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (cannot compute regression)</li><li>Returns values in [0, 1] for valid regressions</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current R-squared value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>sum_x</code>: Sum of x (time indices)</p></li><li><p><code>sum_x2</code>: Sum of x squared</p></li><li><p><code>sum_y</code>: Sum of y (cumulative log returns)</p></li><li><p><code>sum_y2</code>: Sum of y squared</p></li><li><p><code>sum_xy</code>: Sum of x*y</p></li><li><p><code>cum_log_return</code>: Current cumulative log return</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Stability()
for _ in 1:20
    fit!(stat, 0.01)  # Consistent 1% return
end
value(stat)  # Should be close to 1.0 (highly stable)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/stability.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.TailRatio" href="#OnlinePortfolioAnalytics.TailRatio"><code>OnlinePortfolioAnalytics.TailRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct TailRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">TailRatio{T}(; b=500)</code></pre><p>Calculate the tail ratio as the ratio of the 95th percentile to the absolute value of the 5th percentile of returns.</p><p>Tail ratio measures the symmetry of return distribution tails:</p><ul><li>Ratio &gt; 1.0: Fatter right tail (larger gains than losses at extremes)</li><li>Ratio ≈ 1.0: Symmetric tails</li><li>Ratio &lt; 1.0: Fatter left tail (larger losses than gains at extremes)</li></ul><p><strong>Mathematical Definition</strong></p><p><span>$\text{Tail Ratio} = \frac{\text{Percentile}_{95}(R)}{|\text{Percentile}_{5}(R)|}$</span></p><p>Where:</p><ul><li><span>$\text{Percentile}_{95}(R)$</span> = 95th percentile of returns</li><li><span>$\text{Percentile}_{5}(R)$</span> = 5th percentile of returns</li></ul><p><strong>Parameters</strong></p><ul><li><code>b</code>: Number of histogram bins for quantile estimation (default 500)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>Inf</code> if 5th percentile is zero</li><li>May return <code>NaN</code> with insufficient data</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current tail ratio value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>quantile</code>: Internal quantile tracker for 5th and 95th percentiles</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = TailRatio()
for r in returns
    fit!(stat, r)
end
ratio = value(stat)  # &gt; 1.0 means fatter right tail</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.VaR"><code>VaR</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedShortfall"><code>ExpectedShortfall</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/tail_ratio.jl#L3">source</a></section></article><h3 id="Modigliani-Measures"><a class="docs-heading-anchor" href="#Modigliani-Measures">Modigliani Measures</a><a id="Modigliani-Measures-1"></a><a class="docs-heading-anchor-permalink" href="#Modigliani-Measures" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.M2" href="#OnlinePortfolioAnalytics.M2"><code>OnlinePortfolioAnalytics.M2</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct M2{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">M2{T}(; risk_free=0.0)</code></pre><p>Calculate the M2 (Modigliani-Modigliani) risk-adjusted performance measure from a stream of paired portfolio and benchmark returns.</p><p>M2 adjusts the portfolio return to have the same volatility as the benchmark, making performance comparison between portfolios with different risk levels more meaningful.</p><p><strong>Mathematical Definition</strong></p><p><span>$M^2 = R_f + (\bar{R}_{port} - R_f) \times \frac{\sigma_{bench}}{\sigma_{port}}$</span></p><p>Where:</p><ul><li><span>$R_f$</span> = risk-free rate</li><li><span>$\bar{R}_{port}$</span> = mean portfolio return</li><li><span>$\sigma_{port}$</span> = portfolio standard deviation</li><li><span>$\sigma_{bench}$</span> = benchmark standard deviation</li></ul><p><strong>Interpretation</strong></p><ul><li>M2 represents what the portfolio return would have been if it had the same risk as the benchmark</li><li>Higher M2 indicates better risk-adjusted performance</li><li>M2 is directly comparable to benchmark return (same scale and units)</li></ul><p><strong>Parameters</strong></p><ul><li><code>risk_free</code>: Risk-free rate (default 0.0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when portfolio volatility is zero (undefined)</li><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient data)</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current M2 value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>port_mean</code>: Portfolio mean tracker</p></li><li><p><code>port_variance</code>: Portfolio variance tracker</p></li><li><p><code>bench_variance</code>: Benchmark variance tracker</p></li><li><p><code>risk_free</code>: Risk-free rate</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = M2(risk_free=0.02)
fit!(stat, AssetBenchmarkReturn(0.10, 0.08))  # Portfolio +10%, Benchmark +8%
fit!(stat, AssetBenchmarkReturn(0.05, 0.04))  # Portfolio +5%, Benchmark +4%
value(stat)  # Risk-adjusted portfolio return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.MSquaredExcess"><code>MSquaredExcess</code></a>, <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/m2.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.MSquaredExcess" href="#OnlinePortfolioAnalytics.MSquaredExcess"><code>OnlinePortfolioAnalytics.MSquaredExcess</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct MSquaredExcess{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">MSquaredExcess{T}(; risk_free=0.0)</code></pre><p>Calculate the M-Squared Excess (M2 minus benchmark mean return) from a stream of paired portfolio and benchmark returns.</p><p>M-Squared Excess represents the risk-adjusted excess return of the portfolio relative to the benchmark. It shows how much the portfolio would have outperformed (or underperformed) the benchmark if both had the same volatility.</p><p><strong>Mathematical Definition</strong></p><p><span>$M^2_{excess} = M^2 - \bar{R}_{bench}$</span></p><p>Where:</p><ul><li><span>$M^2 = R_f + (\bar{R}_{port} - R_f) \times \frac{\sigma_{bench}}{\sigma_{port}}$</span></li><li><span>$\bar{R}_{bench}$</span> = mean benchmark return</li></ul><p><strong>Interpretation</strong></p><ul><li>Positive value: Portfolio outperforms on a risk-adjusted basis</li><li>Negative value: Portfolio underperforms on a risk-adjusted basis</li><li>Zero: Portfolio performs exactly as expected for its risk level</li></ul><p><strong>Parameters</strong></p><ul><li><code>risk_free</code>: Risk-free rate (default 0.0)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when fewer than 2 observations (insufficient data)</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current M-Squared Excess value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>m2</code>: Internal M2 tracker</p></li><li><p><code>bench_mean</code>: Benchmark mean tracker</p></li><li><p><code>risk_free</code>: Risk-free rate</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = MSquaredExcess(risk_free=0.02)
fit!(stat, AssetBenchmarkReturn(0.10, 0.08))
fit!(stat, AssetBenchmarkReturn(0.05, 0.04))
value(stat)  # Risk-adjusted excess return vs benchmark</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.M2"><code>M2</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a>, <a href="#OnlinePortfolioAnalytics.ActivePremium"><code>ActivePremium</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/m_squared_excess.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.ActivePremium" href="#OnlinePortfolioAnalytics.ActivePremium"><code>OnlinePortfolioAnalytics.ActivePremium</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct ActivePremium{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{AssetBenchmarkReturn{T}}</code></pre><pre><code class="nohighlight hljs">ActivePremium{T}(; period=252)</code></pre><p>Calculate the Active Premium (annualized portfolio return minus annualized benchmark return) from a stream of paired portfolio and benchmark returns.</p><p>Active Premium measures the raw excess return of the portfolio over the benchmark on an annualized basis, without adjusting for risk.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{Active Premium} = \text{AnnualizedReturn}_{port} - \text{AnnualizedReturn}_{bench}$</span></p><p>Where AnnualizedReturn is the CAGR (Compound Annual Growth Rate): <span>$\text{AnnualizedReturn} = (\prod_{i=1}^{n}(1 + r_i))^{period/n} - 1$</span></p><p><strong>Interpretation</strong></p><ul><li>Positive value: Portfolio outperforms benchmark</li><li>Negative value: Portfolio underperforms benchmark</li><li>Zero: Portfolio matches benchmark exactly</li></ul><p><strong>Parameters</strong></p><ul><li><code>period</code>: Annualization factor (default 252 for daily returns)<ul><li>Daily: 252 (trading days per year)</li><li>Weekly: 52</li><li>Monthly: 12</li></ul></li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Active Premium value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>port_ann_return</code>: Portfolio annualized return tracker</p></li><li><p><code>bench_ann_return</code>: Benchmark annualized return tracker</p></li><li><p><code>period</code>: Annualization period</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = ActivePremium(period=252)
fit!(stat, AssetBenchmarkReturn(0.01, 0.008))  # Daily returns
fit!(stat, AssetBenchmarkReturn(0.02, 0.015))
value(stat)  # Annualized excess return</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.AnnualizedReturn"><code>AnnualizedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a>, <a href="#OnlinePortfolioAnalytics.MSquaredExcess"><code>MSquaredExcess</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/active_premium.jl#L5">source</a></section></article><h3 id="Upside-Potential-Ratio"><a class="docs-heading-anchor" href="#Upside-Potential-Ratio">Upside Potential Ratio</a><a id="Upside-Potential-Ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Upside-Potential-Ratio" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.UpsidePotentialRatio" href="#OnlinePortfolioAnalytics.UpsidePotentialRatio"><code>OnlinePortfolioAnalytics.UpsidePotentialRatio</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct UpsidePotentialRatio{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">UpsidePotentialRatio{T}(; mar=0.0)</code></pre><p>Calculate the Upside Potential Ratio from a stream of returns.</p><p>The Upside Potential Ratio measures the ratio of expected positive deviation above a Minimum Acceptable Return (MAR) to the downside deviation below that threshold. It captures the asymmetry between upside gains and downside losses.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{UPR} = \frac{E[\max(R - MAR, 0)]}{\text{DownsideDeviation}}$</span></p><p>Where:</p><ul><li><span>$R$</span> = return</li><li><span>$MAR$</span> = Minimum Acceptable Return (threshold)</li><li>Upside Potential = <span>$\frac{1}{n} \sum_{i=1}^{n} \max(R_i - MAR, 0)$</span></li><li>Downside Deviation = <span>$\sqrt{\frac{1}{n} \sum_{i=1}^{n} \min(R_i - MAR, 0)^2}$</span></li></ul><p><strong>Interpretation</strong></p><ul><li>UPR &gt; 1: Upside potential exceeds downside risk (favorable)</li><li>UPR = 1: Upside potential equals downside risk</li><li>UPR &lt; 1: Downside risk exceeds upside potential (unfavorable)</li><li>UPR = Inf: No downside (all returns above MAR)</li><li>UPR = 0: No upside (all returns below MAR)</li></ul><p><strong>Parameters</strong></p><ul><li><code>mar</code>: Minimum Acceptable Return threshold (default 0.0)</li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current Upside Potential Ratio value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>sum_upside</code>: Sum of positive deviations from MAR</p></li><li><p><code>downside_deviation</code>: Internal downside deviation tracker</p></li><li><p><code>mar</code>: Minimum Acceptable Return threshold</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = UpsidePotentialRatio(mar=0.0)
fit!(stat, 0.10)   # +10% return
fit!(stat, -0.03)  # -3% return
fit!(stat, 0.05)   # +5% return
value(stat)  # Upside potential / downside deviation</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>DownsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.UpsideDeviation"><code>UpsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.Sortino"><code>Sortino</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/upside_potential_ratio.jl#L3">source</a></section></article><h3 id="Rolling-Window-Framework"><a class="docs-heading-anchor" href="#Rolling-Window-Framework">Rolling Window Framework</a><a id="Rolling-Window-Framework-1"></a><a class="docs-heading-anchor-permalink" href="#Rolling-Window-Framework" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Rolling" href="#OnlinePortfolioAnalytics.Rolling"><code>OnlinePortfolioAnalytics.Rolling</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Rolling{T, S&lt;:OnlineStatsBase.OnlineStat} &lt;: OnlineStatsBase.OnlineStat{T}</code></pre><pre><code class="nohighlight hljs">Rolling(stat; window)</code></pre><p>Wrap any OnlineStat to compute rolling window statistics.</p><p>The Rolling wrapper maintains a circular buffer of observations and recomputes the wrapped statistic over only the most recent <code>window</code> observations. This enables streaming computation of rolling metrics like rolling Sharpe ratio or rolling drawdown.</p><p><strong>Parameters</strong></p><ul><li><code>stat</code>: Any OnlineStat to wrap (e.g., <code>Sharpe{Float64}()</code>, <code>MaxDrawDown{Float64}()</code>)</li><li><code>window</code>: Size of the rolling window (must be &gt; 0)</li></ul><p><strong>Implementation Details</strong></p><p>When a new observation arrives:</p><ol><li>Add it to the circular buffer</li><li>If buffer exceeds window size, the oldest observation is automatically removed</li><li>Reset the wrapped stat and refit with all buffer contents</li></ol><p><strong>Edge Cases</strong></p><ul><li>Before window is full: Computes on available observations (partial window)</li><li>After window is full: Computes on exactly <code>window</code> most recent observations</li></ul><p><strong>Fields</strong></p><ul><li><p><code>stat</code>: The wrapped OnlineStat</p></li><li><p><code>buffer</code>: Circular buffer storing observations (OnlineStatsBase.CircBuff)</p></li><li><p><code>window</code>: Rolling window size</p></li><li><p><code>n</code>: Total observations seen</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Rolling 60-period Sharpe ratio
rolling_sharpe = Rolling(Sharpe{Float64}(), window=60)
for ret in daily_returns
    fit!(rolling_sharpe, ret)
    println(&quot;60-day rolling Sharpe: &quot;, value(rolling_sharpe))
end

# Rolling 30-period max drawdown
rolling_dd = Rolling(MaxDrawDown{Float64}(), window=30)
for ret in returns
    fit!(rolling_dd, ret)
end</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Sharpe"><code>Sharpe</code></a>, <a href="#OnlinePortfolioAnalytics.MaxDrawDown"><code>MaxDrawDown</code></a>, <a href="#OnlinePortfolioAnalytics.Calmar"><code>Calmar</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/rolling.jl#L13">source</a></section></article><h2 id="Input-types"><a class="docs-heading-anchor" href="#Input-types">Input types</a><a id="Input-types-1"></a><a class="docs-heading-anchor-permalink" href="#Input-types" title="Permalink"></a></h2><h3 id="Asset/Benchmark-return-pair"><a class="docs-heading-anchor" href="#Asset/Benchmark-return-pair">Asset/Benchmark return pair</a><a id="Asset/Benchmark-return-pair-1"></a><a class="docs-heading-anchor-permalink" href="#Asset/Benchmark-return-pair" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.AssetBenchmarkReturn" href="#OnlinePortfolioAnalytics.AssetBenchmarkReturn"><code>OnlinePortfolioAnalytics.AssetBenchmarkReturn</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct AssetBenchmarkReturn{T&lt;:Real}</code></pre><pre><code class="nohighlight hljs">AssetBenchmarkReturn{T&lt;:Real}(asset, benchmark)</code></pre><p>Wrapper type for paired (asset, benchmark) return observations.</p><p>Used as input for relative performance metrics (e.g., <a href="#OnlinePortfolioAnalytics.TrackingError"><code>TrackingError</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a>) and CAPM-based metrics (e.g., <a href="#Beta"><code>Beta</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>ExpectedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.Treynor"><code>Treynor</code></a>, <a href="#OnlinePortfolioAnalytics.JensenAlpha"><code>JensenAlpha</code></a>).</p><p>The benchmark can be any reference portfolio or market index depending on the analysis context.</p><p><strong>Fields</strong></p><ul><li><code>asset::T</code>: Asset/portfolio return for this observation</li><li><code>benchmark::T</code>: Benchmark/market return for this observation</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">obs = AssetBenchmarkReturn(0.05, 0.03)  # 5% asset return, 3% benchmark return
fit!(beta_stat, obs)
fit!(tracking_error_stat, obs)</code></pre><p>See also: <a href="#Beta"><code>Beta</code></a>, <a href="#OnlinePortfolioAnalytics.ExpectedReturn"><code>ExpectedReturn</code></a>, <a href="#OnlinePortfolioAnalytics.Treynor"><code>Treynor</code></a>, <a href="#OnlinePortfolioAnalytics.JensenAlpha"><code>JensenAlpha</code></a>, <a href="#OnlinePortfolioAnalytics.TrackingError"><code>TrackingError</code></a>, <a href="#OnlinePortfolioAnalytics.InformationRatio"><code>InformationRatio</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/asset_benchmark_return.jl#L3">source</a></section></article><h2 id="Other"><a class="docs-heading-anchor" href="#Other">Other</a><a id="Other-1"></a><a class="docs-heading-anchor-permalink" href="#Other" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.Prod" href="#OnlinePortfolioAnalytics.Prod"><code>OnlinePortfolioAnalytics.Prod</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Prod{T} &lt;: OnlineStatsBase.OnlineStat{Number}</code></pre><pre><code class="nohighlight hljs">Prod(T::Type = Float64)</code></pre><p>Streaming product accumulator that computes the running product of observations.</p><p><strong>Mathematical Definition</strong></p><p><span>$P = \prod_{i=1}^{n} x_i$</span></p><p>Where:</p><ul><li><span>$x_i$</span> = observation for period i</li><li><span>$n$</span> = number of observations</li></ul><p>For weighted observations with weight <span>$w$</span>: <span>$P = P \cdot x^w$</span></p><p>This represents &quot;fitting x with multiplicity w&quot; - equivalent to fitting x exactly w times.</p><p><strong>Fields</strong></p><ul><li><code>prod::T</code>: Current accumulated product value</li><li><code>n::Int</code>: Number of observations (or total accumulated weight)</li></ul><p><strong>Initial State</strong></p><ul><li><code>prod = one(T)</code> (multiplicative identity)</li><li><code>n = 0</code></li></ul><p><strong>Edge Cases</strong></p><ul><li>Empty stat: <code>value(stat) == one(T)</code>, <code>nobs(stat) == 0</code></li><li>Zero input: Product becomes and stays zero</li><li>For <code>T&lt;:Integer</code>: inputs are rounded before multiplication</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = Prod(Float64)
fit!(stat, 2.0)
fit!(stat, 3.0)
fit!(stat, 4.0)
value(stat)  # =&gt; 24.0
nobs(stat)   # =&gt; 3

# Weighted fit (x^w semantics)
stat2 = Prod(Float64)
fit!(stat2, 2.0, 3)  # 2^3 = 8
value(stat2)  # =&gt; 8.0</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.LogProd"><code>LogProd</code></a>, <a href="#OnlinePortfolioAnalytics.CumulativeReturn"><code>CumulativeReturn</code></a>, <a href="#OnlinePortfolioAnalytics.GeometricMeanReturn"><code>GeometricMeanReturn</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/prod.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.LogProd" href="#OnlinePortfolioAnalytics.LogProd"><code>OnlinePortfolioAnalytics.LogProd</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct LogProd{T} &lt;: OnlineStatsBase.OnlineStat{Number}</code></pre><pre><code class="nohighlight hljs">LogProd(T::Type = Float64)</code></pre><p>Numerically stable streaming product accumulator that operates in log-space.</p><p>For products of many values (&gt;100), standard multiplication can overflow (<code>Inf</code>) or underflow (<code>0.0</code>). <code>LogProd</code> avoids this by accumulating <code>log(x)</code> values and returning <code>exp(sum_of_logs)</code>.</p><p><strong>Mathematical Definition</strong></p><p><span>$P = \prod_{i=1}^{n} x_i = \exp\left(\sum_{i=1}^{n} \log(x_i)\right)$</span></p><p>For weighted observations: <span>$P = P \cdot x^w = \exp(\text{log\_sum} + w \cdot \log(x))$</span></p><p><strong>Fields</strong></p><ul><li><code>log_sum::T</code>: Sum of logarithms of observed values</li><li><code>n::Int</code>: Number of observations (or total accumulated weight)</li></ul><p><strong>Initial State</strong></p><ul><li><code>log_sum = zero(T)</code></li><li><code>n = 0</code></li><li><code>value(stat) == 1.0</code> (since <code>exp(0) = 1</code>)</li></ul><p><strong>Edge Cases</strong></p><ul><li>Empty stat: <code>value(stat) == 1.0</code>, <code>nobs(stat) == 0</code></li><li>Zero input (<code>x = 0</code>): <code>log(0) = -Inf</code>, so <code>value(stat) == 0.0</code></li><li>Negative input (<code>x &lt; 0</code>): <code>log(x)</code> returns <code>NaN</code> (undefined in real domain)</li><li>For very large products: stays finite when <code>Prod</code> would overflow</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs"># Standard Prod overflows
prod_stat = Prod(Float64)
for _ in 1:10000
    fit!(prod_stat, 1.001)
end
value(prod_stat)  # =&gt; Inf (overflow!)

# LogProd stays stable
log_stat = LogProd(Float64)
for _ in 1:10000
    fit!(log_stat, 1.001)
end
value(log_stat)  # =&gt; 21916.68... (finite and correct)</code></pre><p>See also: <a href="#OnlinePortfolioAnalytics.Prod"><code>Prod</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/prod.jl#L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OnlinePortfolioAnalytics.RMS" href="#OnlinePortfolioAnalytics.RMS"><code>OnlinePortfolioAnalytics.RMS</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct RMS{T} &lt;: OnlinePortfolioAnalytics.PortfolioAnalyticsSingleOutput{T}</code></pre><pre><code class="nohighlight hljs">RMS{T}()</code></pre><p>Calculate the Root Mean Square (RMS) from a stream of numeric values.</p><p>RMS is a fundamental statistical measure that computes the square root of the mean of squared values. It is commonly used in signal processing, physics, and finance to measure the magnitude of varying quantities.</p><p><strong>Mathematical Definition</strong></p><p><span>$\text{RMS} = \sqrt{\frac{1}{n} \sum_{i=1}^{n} x_i^2}$</span></p><p>Where:</p><ul><li><span>$x_i$</span> = observation at time i</li><li><span>$n$</span> = total number of observations</li></ul><p><strong>Edge Cases</strong></p><ul><li>Returns <code>0.0</code> when no observations (n=0)</li><li>Handles negative values correctly (squared, so sign doesn&#39;t matter)</li><li>RMS of all zeros returns <code>0.0</code></li></ul><p><strong>Fields</strong></p><ul><li><p><code>value</code>: Current RMS value</p></li><li><p><code>n</code>: Number of observations</p></li><li><p><code>sum_sq</code>: Sum of squared values</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">stat = RMS()
fit!(stat, 3.0)
fit!(stat, 4.0)
value(stat)  # sqrt((9+16)/2) ≈ 3.536</code></pre><p><strong>Usage in Portfolio Analytics</strong></p><p>RMS is used internally by <a href="#OnlinePortfolioAnalytics.UlcerIndex"><code>UlcerIndex</code></a> to compute the root-mean-square of drawdown values, measuring the &quot;pain&quot; of holding an investment through volatile periods.</p><p>See also: <a href="#OnlinePortfolioAnalytics.UlcerIndex"><code>UlcerIndex</code></a>, <a href="#OnlinePortfolioAnalytics.DownsideDeviation"><code>DownsideDeviation</code></a>, <a href="#OnlinePortfolioAnalytics.StdDev"><code>StdDev</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/femtotrader/OnlinePortfolioAnalytics.jl/blob/6653fc6396a1c5aa14d028a8287423da74292125/src/rms.jl#L3">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Monday 5 January 2026 17:51">Monday 5 January 2026</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
